import unittest
from states import find_next_states
from AIPlayer import convert_to_tuple

class test_find_next_state(unittest.TestCase):
    def test_movement_scenarios(self):
        testScenarios = [
            {
                "name": "Scenario 1",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 2",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 3",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 4], [-1, 0], [-1, 4], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 4], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1, 4], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 4",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 3], [-1], [-1, 2], [-1, 1]], [[-1, 1], [-1, 4], [-1, 0], [-1, 4], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 3], [-1], [-1, 2], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1, 4], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 3], [-1], [-1, 2], [-1, 1]], [[-1, 1], [-1, 4], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 5",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 6",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1, 5, 0], [-1, 7], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1, 7], [-1, 1]], [[-1, 1], [-1, 0], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1, 5], [-1, 7], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1, 5], [-1, 7], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 7",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 6, 0], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 6], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 6, 0], [-1, 6], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 6], [-1, 6, 0], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 8",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 2], [-1, 4], [-1, 3], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 2], [-1, 4], [-1, 3], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 2], [-1, 4], [-1, 3], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 9",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 6], [-1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 5, 0], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 6], [-1], [-1, 1]], [[-1, 1], [-1, 6, 0], [-1, 5], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 6], [-1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 5], [-1, 6, 0], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 6], [-1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 5], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1, 5, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 6, 0], [-1], [-1, 1]], [[-1, 1], [-1, 6], [-1, 5], [-1, 6], [-1, 1]], [[-1, 1], [-1], [-1, 5], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 10",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1, 3], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1, 3], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 11",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 3], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 3], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 12",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1, 3], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 3], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 13",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 3], [-1, 0], [-1, 1]], [[-1, 1], [-1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 3], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 14",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 0], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": []
            },
            {
                "name": "Scenario 15",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1, 2], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 3], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 0], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 2], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1, 3], [-1], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 2], [-1], [-1, 1]], [[-1, 1], [-1], [-1, 3], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
            {
                "name": "Scenario 16",
                "initialState": [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1, 0], [-1, 2], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]],
                "expectedNextStates": [[[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 0], [-1], [-1, 2], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]], [[[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1], [-1], [-1], [-1, 1]], [[-1, 1], [-1, 7], [-1], [-1, 0], [-1, 1]], [[-1, 1], [-1, 1], [-1, 1], [-1, 1], [-1, 1]]]]
            },
        ]

        for scenario in testScenarios:
            with self.subTest(scenario["name"]):
                expectedStatesSet = set()
                for state in scenario["expectedNextStates"]:
                    stateTuple = convert_to_tuple(state)
                    expectedStatesSet.add(stateTuple)

                calculatedNextStates, directions = find_next_states(scenario["initialState"])

                calculatedStatesSet = set()
                for state in calculatedNextStates:
                    stateTuple = convert_to_tuple(state)
                    calculatedStatesSet.add(stateTuple)

                self.assertEqual(expectedStatesSet, calculatedStatesSet)
                print(f"{scenario["name"]} is correct")

if __name__ == '__main__':
    unittest.main()